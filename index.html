<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Typing Test - Monkeytype Style</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap');

  body {
    background: #121212;
    color: #e0e0e0;
    font-family: 'Fira Mono', monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
    user-select: none;
  }

  #container {
    position: relative;
    max-width: 700px;
    font-size: 1.8rem;
    line-height: 2.2rem;
    border: 1px solid #333;
    padding: 20px;
    border-radius: 8px;
    background: #1e1e1e;
  }

  #text-display {
    white-space: pre-wrap;
    color: #888;
  }

  #text-display .correct {
    color: #6fcf97;
  }

  #text-display .incorrect {
    color: #eb5757;
  }

  /* Invisible input to capture typing */
  #hidden-input {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: transparent;
    color: transparent;
    border: none;
    caret-color: white;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    resize: none;
    outline: none;
  }

  #stats {
    margin-top: 20px;
    font-size: 1.3rem;
  }
</style>
</head>
<body>

<h1>Type My Personal Info</h1>

<div id="container" tabindex="0">
  <pre id="text-display"></pre>
  <textarea id="hidden-input" autofocus spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="off"></textarea>
</div>

<div id="stats">
  WPM: <span id="wpm">0</span> | Accuracy: <span id="accuracy">100</span>%
</div>

<script>
  const personalInfo = `Hi, I'm Magnus Scott.
I'm a Mechatronics Engineering student.
I love robotics, AI, and programming.
Reach me at magnus@example.com.
`;

  const textDisplay = document.getElementById('text-display');
  const hiddenInput = document.getElementById('hidden-input');
  const wpmDisplay = document.getElementById('wpm');
  const accuracyDisplay = document.getElementById('accuracy');

  let startTime = null;
  let timerRunning = false;

  function calculateWPM(timeElapsed, charCount) {
    return Math.round((charCount / 5) / (timeElapsed / 60000)) || 0;
  }

  function calculateAccuracy(original, typed) {
    if (typed.length === 0) return 100;
    let correct = 0;
    for (let i = 0; i < typed.length; i++) {
      if (typed[i] === original[i]) correct++;
    }
    return Math.round((correct / typed.length) * 100);
  }

  function updateDisplay(typed) {
    let html = '';
    for (let i = 0; i < personalInfo.length; i++) {
      const char = personalInfo[i];
      if (i < typed.length) {
        if (typed[i] === char) {
          html += `<span class="correct">${char}</span>`;
        } else {
          html += `<span class="incorrect">${char}</span>`;
        }
      } else {
        html += char;
      }
    }
    textDisplay.innerHTML = html;
  }

  hiddenInput.addEventListener('input', () => {
    const typed = hiddenInput.value;

    if (!timerRunning && typed.length > 0) {
      startTime = Date.now();
      timerRunning = true;
    }

    updateDisplay(typed);

    if (typed.length > 0) {
      const elapsed = Date.now() - startTime;
      const wpm = calculateWPM(elapsed, typed.length);
      const accuracy = calculateAccuracy(personalInfo, typed);
      wpmDisplay.textContent = wpm;
      accuracyDisplay.textContent = accuracy;
    } else {
      wpmDisplay.textContent = 0;
      accuracyDisplay.textContent = 100;
    }

    // When finished typing the full text
    if (typed === personalInfo) {
      hiddenInput.disabled = true;
    }
  });

  // Initialize display
  updateDisplay('');

  // Focus input container on click (to focus hidden textarea)
  document.getElementById('container').addEventListener('click', () => {
    hiddenInput.focus();
  });
</script>

</body>
</html>